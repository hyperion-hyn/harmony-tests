category: "Undelegate"
name: "UDNAMT5"
goal: "operator after undelegation remain amount less then commision rate"
priority: 0
execute: true
expected: false
expect_err: "self delegation amount too small"
verbose: true
scenario: "microstake/delegation/undelegate/standard"
staking_parameters:
  mode: "undelegate_operator"
  nonce: -1 # -1 means that the nonce will automatically be identified
  timeout: 60
  gas:
    limit: -1 # -1 means that the gas limit will automatically get calculated
    price: 1
  reuse_existing_validator: false
  create:
    map3Node:
      details:
        name: "HarmonyTF_UDNAMT5_Validator"
        identity: "HarmonyTF_UDNAMT5_Validator"
        website: "https://harmony.one"
        security_contact: "validator@somewhere.com"
        details: "Validator generated by HarmonyTF"
      commission: 0.2
      amount: 120000
    bls_key_count: 1
    randomize_unique_fields: true
  delegation:
    delegate:
      amount: 300000
    undelegate:
      wait_epoch: 7
      amount: 20000
